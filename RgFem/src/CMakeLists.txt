set(TARGET_NAME RgFem)
project(${TARGET_NAME} LANGUAGES CXX)
set(SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR})
add_library(${TARGET_NAME} SHARED "")
target_compile_definitions(RgFem PRIVATE RgFem_Module)

target_include_directories(${TARGET_NAME} PRIVATE ${SOURCE_DIR})

set(Eigen_Root "D:/Program Files/eigen-3.4.0/eigen-3.4.0")
target_include_directories(${TARGET_NAME} PRIVATE ${Eigen_Root})

file(GLOB rootfiles *.cpp *.h)
source_group("" FILES ${rootfiles})
target_sources(${TARGET_NAME} PRIVATE ${rootfiles})
SUBDIRLIST(SUBDIRS ${SOURCE_DIR})
foreach(subdir ${SUBDIRS})
    file(GLOB subdirFiles ${subdir}/*.cpp ${subdir}/*.h)
    string(REPLACE "/" "\\" subdir ${subdir})
    source_group(${subdir} FILES ${subdirFiles})
    target_sources(${TARGET_NAME} PRIVATE ${subdirFiles})
endforeach()